
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Know India Through Every Station - Fallback</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f9f9f9;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #2c3e50;
    }
    .box {
      background: #fff;
      border-radius: 8px;
      padding: 15px;
      margin: 10px 0;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    iframe {
      width: 100%;
      height: 300px;
      border: none;
      border-radius: 10px;
    }
    button, select {
      margin-top: 10px;
      padding: 10px 15px;
      background: #007bff;
      border: none;
      border-radius: 5px;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover {
      background: #0056b3;
    }
    select {
      background: white;
      color: black;
    }
  </style>
</head>
<body>

<h1>âœ¨ Know India Through Every Station âœ¨</h1>
<div class="box" id="location">location: Gwalior</div>
<div class="box" id="place">Fetching place name...</div>
<iframe id="map"></iframe>
<div class="box" id="facts">Loading facts...</div>
<label for="language">Language:</label>
<select id="language">
  <option value="en">English</option>
  <option value="hi">Hindi</option>
</select>
<button onclick="speakInfo()">ðŸ”Š Speak Again</button>

<script>
window.speechSynthesis.onvoiceschanged = () => {};

const locationBox = document.getElementById('location');
const placeBox = document.getElementById('place');
const map = document.getElementById('map');
const factsBox = document.getElementById('facts');
const languageSelect = document.getElementById('language');

const API_KEY = '53360715f60741e5a19d9b3f4080918b';

const factsDatabase = {
  "gwalior": {
    en: "Gwalior is known for its magnificent fort and as the birthplace of the great musician Tansen.",
    hi: "à¤—à¥à¤µà¤¾à¤²à¤¿à¤¯à¤° à¤…à¤ªà¤¨à¥‡ à¤­à¤µà¥à¤¯ à¤•à¤¿à¤²à¥‡ à¤”à¤° à¤®à¤¹à¤¾à¤¨ à¤¸à¤‚à¤—à¥€à¤¤à¤•à¤¾à¤° à¤¤à¤¾à¤¨à¤¸à¥‡à¤¨ à¤•à¥€ à¤œà¤¨à¥à¤®à¤¸à¥à¤¥à¤²à¥€ à¤•à¥‡ à¤°à¥‚à¤ª à¤®à¥‡à¤‚ à¤ªà¥à¤°à¤¸à¤¿à¤¦à¥à¤§ à¤¹à¥ˆà¥¤"
  }
  "jhansi": {
  en: "Jhansi is known for Rani Lakshmi Bai and its key role in the 1857 rebellion.",
  hi: "à¤à¤¾à¤à¤¸à¥€ à¤°à¤¾à¤¨à¥€ à¤²à¤•à¥à¤·à¥à¤®à¥€à¤¬à¤¾à¤ˆ à¤”à¤° 1857 à¤•à¥€ à¤•à¥à¤°à¤¾à¤‚à¤¤à¤¿ à¤®à¥‡à¤‚ à¤…à¤ªà¤¨à¥€ à¤­à¥‚à¤®à¤¿à¤•à¤¾ à¤•à¥‡ à¤²à¤¿à¤ à¤ªà¥à¤°à¤¸à¤¿à¤¦à¥à¤§ à¤¹à¥ˆà¥¤"
},
"cuttack": {
  en: "Cuttack is one of the oldest cities in Odisha, famous for silver filigree work and Durga Puja.",
  hi: "à¤•à¤Ÿà¤• à¤‰à¤¡à¤¼à¥€à¤¸à¤¾ à¤•à¤¾ à¤à¤• à¤ªà¥à¤°à¤¾à¤šà¥€à¤¨ à¤¶à¤¹à¤° à¤¹à¥ˆ, à¤œà¥‹ à¤šà¤¾à¤‚à¤¦à¥€ à¤•à¥€ à¤•à¤¾à¤°à¥€à¤—à¤°à¥€ à¤”à¤° à¤¦à¥à¤°à¥à¤—à¤¾ à¤ªà¥‚à¤œà¤¾ à¤•à¥‡ à¤²à¤¿à¤ à¤ªà¥à¤°à¤¸à¤¿à¤¦à¥à¤§ à¤¹à¥ˆà¥¤"
},
"bharthia": {
  en: "Bharthia is a culturally rich town with deep-rooted traditions and heritage.",
  hi: "à¤­à¤¾à¤°à¤¥à¤¿à¤¯à¤¾ à¤à¤• à¤¸à¤¾à¤‚à¤¸à¥à¤•à¥ƒà¤¤à¤¿à¤• à¤°à¥‚à¤ª à¤¸à¥‡ à¤¸à¤®à¥ƒà¤¦à¥à¤§ à¤¨à¤—à¤° à¤¹à¥ˆ, à¤œà¤¿à¤¸à¤•à¥€ à¤ªà¤°à¤‚à¤ªà¤°à¤¾à¤à¤‚ à¤”à¤° à¤µà¤¿à¤°à¤¾à¤¸à¤¤ à¤—à¤¹à¤°à¥€ à¤¹à¥ˆà¤‚à¥¤"
},
"tonk": {
  en: "Tonk is known for its Nawabi heritage and beautiful Islamic architecture.",
  hi: "à¤Ÿà¥‹à¤‚à¤• à¤…à¤ªà¤¨à¥€ à¤¨à¤µà¤¾à¤¬à¥€ à¤µà¤¿à¤°à¤¾à¤¸à¤¤ à¤”à¤° à¤¸à¥à¤‚à¤¦à¤° à¤‡à¤¸à¥à¤²à¤¾à¤®à¥€ à¤µà¤¾à¤¸à¥à¤¤à¥à¤•à¤²à¤¾ à¤•à¥‡ à¤²à¤¿à¤ à¤œà¤¾à¤¨à¤¾ à¤œà¤¾à¤¤à¤¾ à¤¹à¥ˆà¥¤"
},
"rajkot": {
  en: "Rajkot is an important city in Gujarat, known for its association with Mahatma Gandhi.",
  hi: "à¤°à¤¾à¤œà¤•à¥‹à¤Ÿ à¤—à¥à¤œà¤°à¤¾à¤¤ à¤•à¤¾ à¤à¤• à¤®à¤¹à¤¤à¥à¤µà¤ªà¥‚à¤°à¥à¤£ à¤¶à¤¹à¤° à¤¹à¥ˆ, à¤œà¥‹ à¤®à¤¹à¤¾à¤¤à¥à¤®à¤¾ à¤—à¤¾à¤‚à¤§à¥€ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤œà¥à¤¡à¤¼à¥‡ à¤¹à¥‹à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤ªà¥à¤°à¤¸à¤¿à¤¦à¥à¤§ à¤¹à¥ˆà¥¤"
}

};

function fetchFact(place, lang) {
  const placeKey = place.toLowerCase();
  for (const key in factsDatabase) {
    if (placeKey.includes(key)) {
      return factsDatabase[key][lang];
    }
  }
  return lang === 'hi' ? 'à¤‡à¤¸ à¤¸à¥à¤¥à¤¾à¤¨ à¤•à¥‡ à¤²à¤¿à¤ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ à¤‰à¤ªà¤²à¤¬à¥à¤§ à¤¨à¤¹à¥€à¤‚ à¤¹à¥ˆà¥¤' : 'No facts available for this location.';
}

function speakInfo() {
  const lang = languageSelect.value;
  const msg = new SpeechSynthesisUtterance();
  msg.text = window.spokenText?.[lang] || (lang === 'hi' ? 'à¤•à¥‹à¤ˆ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ à¤‰à¤ªà¤²à¤¬à¥à¤§ à¤¨à¤¹à¥€à¤‚ à¤¹à¥ˆà¥¤' : 'Information not available.');

  const voices = window.speechSynthesis.getVoices();
  if (lang === 'hi') {
    msg.voice = voices.find(v => v.lang === 'hi-IN') || voices.find(v => v.name.toLowerCase().includes('hindi'));
    msg.lang = 'hi-IN';
  } else {
    msg.voice = voices.find(v => v.lang.startsWith('en-')) || null;
    msg.lang = 'en-IN';
  }

  window.speechSynthesis.cancel();
  window.speechSynthesis.speak(msg);
}

function loadStaticLocation() {
  const lat = 26.2183;
  const lon = 78.1828;
  map.src = `https://www.google.com/maps?q=${lat},${lon}&z=15&output=embed`;

  fetch(`https://api.opencagedata.com/geocode/v1/json?q=${lat}+${lon}&key=${API_KEY}`)
    .then(res => res.json())
    .then(data => {
      const components = data.results[0].components;
      const city = components.city || components.town || components.village || components.county || components.state_district || 'Gwalior';
      const state = components.state || '';
      const country = components.country || '';
      const lang = languageSelect.value;

      const fullPlace = `${city}, ${state}, ${country}`;
      placeBox.innerText = `You are near: ${fullPlace}`;
      const fact = fetchFact(city, lang);
      factsBox.innerText = `Fact: ${fact}`;

      window.spokenText = {
        en: `You are near ${fullPlace}. ${fetchFact(city, 'en')}`,
        hi: `${fullPlace} à¤•à¥‡ à¤ªà¤¾à¤¸ à¤¹à¥ˆà¤‚à¥¤ ${fetchFact(city, 'hi')}`
      };

      speakInfo();
    })
    .catch(err => {
      placeBox.innerText = 'Could not fetch place info.';
    });
}

loadStaticLocation();

languageSelect.addEventListener('change', () => {
  if (window.spokenText) speakInfo();
});
</script>

</body>
</html>
